<div id="cookie-banner"
    class="fixed bottom-0 left-0 right-0 bg-background-dark text-text-light p-6 shadow-2xl z-50 transform translate-y-full transition-transform duration-500 ease-out">
    <div class="container mx-auto flex flex-col md:flex-row items-center justify-between gap-6">
        <div class="flex-grow text-center md:text-left">
            <h3 class="text-2xl font-bold mb-2 text-accent">
                Gérez vos préférences de cookies
            </h3>
            <p class="text-lg leading-relaxed">
                Notre site utilise des cookies et autres traceurs pour améliorer votre
                expérience de navigation, analyser le trafic et personnaliser nos
                services. Certains sont essentiels pour le fonctionnement du site,
                d'autres nécessitent votre consentement.
            </p>
            <p class="mt-3 text-lg">
                Pour en savoir plus sur les données que nous collectons, consultez
                notre
                <a href="/politique-confidentialite.html" class="text-accent hover:underline font-semibold">Politique de
                    Confidentialité</a>.
            </p>
        </div>
        <div class="flex flex-col sm:flex-row gap-3 w-full md:w-auto">
            <button id="accept-cookies"
                class="bg-primary-dark hover:bg-primary-medium text-text-light font-bold py-3 px-6 rounded-md shadow-lg transition duration-300 transform hover:scale-105 text-lg w-full">
                Accepter tout
            </button>
            <button id="reject-cookies"
                class="bg-neutral-medium hover:bg-neutral-dark text-text-light font-bold py-3 px-6 rounded-md shadow-lg transition duration-300 transform hover:scale-105 text-lg w-full">
                Refuser tout
            </button>
        </div>
    </div>
</div>
<script>
    document.addEventListener("DOMContentLoaded", () => {
        const cookieBanner = document.getElementById("cookie-banner");
        const acceptButton = document.getElementById("accept-cookies");
        const rejectButton = document.getElementById("reject-cookies");

        // Check if the user has already made a choice
        const cookieConsent = localStorage.getItem("cookieConsent");

        if (!cookieConsent) {
            // Show the banner if no choice has been made
            setTimeout(() => {
                cookieBanner.classList.remove("translate-y-full");
            }, 500); // Small delay to ensure CSS transition works
        } else {
            // If a choice exists, remove the banner from the flow
            cookieBanner.style.display = "none";
        }

        // Event listener for "Accept All" button
        acceptButton.addEventListener("click", () => {
            localStorage.setItem("cookieConsent", "accepted");
            cookieBanner.classList.add("translate-y-full"); // Hide the banner
            setTimeout(() => {
                cookieBanner.style.display = "none";
            }, 500); // Remove from display after transition
            // Here, you would typically load/enable all tracking scripts (e.g., Google Analytics)
            // Example: loadGoogleAnalytics();
            console.log(
                "Cookies accepted. (Placeholder: Load all analytics/tracking scripts)"
            );
        });

        // Event listener for "Reject All" button
        rejectButton.addEventListener("click", () => {
            localStorage.setItem("cookieConsent", "rejected");
            cookieBanner.classList.add("translate-y-full"); // Hide the banner
            setTimeout(() => {
                cookieBanner.style.display = "none";
            }, 500); // Remove from display after transition
            // Here, you would typically disable/unload all non-essential tracking scripts
            // Example: disableGoogleAnalytics();
            console.log(
                "Cookies rejected. (Placeholder: Disable non-essential scripts)"
            );
        });

        // IMPORTANT FOR COMPLIANCE:
        // By default, NO non-essential cookies/trackers should be loaded until 'accepted' is clicked.
        // You need to implement this logic for each third-party script (e.g., Google Analytics, Calendly's tracking features if any).
        // This basic script only manages the banner's visibility based on a simple 'accepted' or 'rejected' flag.
        // For Calendly, you might need to check its documentation on how to defer its loading based on user consent.
        // A robust CMP handles this script blocking automatically.
    });
</script>